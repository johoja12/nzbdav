Starting database migration...
[09:31:34 WRN] ═══════════════════════════════════════════════════════════════
[09:31:34 WRN]   NzbDav Backend Starting - BUILD v2026-01-04-DEBUG-HISTORY
[09:31:34 WRN]   DEBUG: Enhanced logging for history item lifecycle
[09:31:34 WRN]   - Logs CompletedAt timestamp when items added to history
[09:31:34 WRN]   - Logs age and timestamps when items removed from history
[09:31:34 WRN]   - Shows total history count during cleanup runs
[09:31:34 WRN]   - Tracks exactly when and why items disappear
[09:31:34 WRN]   ALSO INCLUDES: Infinite loop detection for stalls
[09:31:34 WRN] ═══════════════════════════════════════════════════════════════
[09:31:34 WRN] Starting database migration with PRAGMA optimizations...
[09:31:34 WRN]   → Applying PRAGMA journal_mode = WAL
[09:31:35 WRN]   → Applying PRAGMA synchronous = NORMAL
[09:31:35 WRN]   → Applying PRAGMA cache_size = -64000 (64MB cache)
[09:31:35 WRN]   → Applying PRAGMA temp_store = MEMORY
[09:31:35 WRN]   → Applying PRAGMA mmap_size = 268435456 (256MB)
[09:31:35 WRN]   → Clearing any stale migration locks...
Unhandled exception. Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: __EFMigrationsLock'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteNonQuery()
   at System.Data.Common.DbCommand.ExecuteNonQueryAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at NzbWebDAV.Program.Main(String[] args) in /backend/Program.cs:line 108
   at NzbWebDAV.Program.Main(String[] args) in /backend/Program.cs:line 226
   at NzbWebDAV.Program.<Main>(String[] args)
Aborted (core dumped)
Database migration completed.
Waiting for backend to start.
Checking backend health: http://localhost:8080/health ...
[09:31:35 WRN] ═══════════════════════════════════════════════════════════════
[09:31:35 WRN]   NzbDav Backend Starting - BUILD v2026-01-04-DEBUG-HISTORY
[09:31:35 WRN]   DEBUG: Enhanced logging for history item lifecycle
[09:31:35 WRN]   - Logs CompletedAt timestamp when items added to history
[09:31:35 WRN]   - Logs age and timestamps when items removed from history
[09:31:35 WRN]   - Shows total history count during cleanup runs
[09:31:35 WRN]   - Tracks exactly when and why items disappear
[09:31:35 WRN]   ALSO INCLUDES: Infinite loop detection for stalls
[09:31:35 WRN] ═══════════════════════════════════════════════════════════════
Unhandled exception. Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: ConfigItems'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NzbWebDAV.Config.ConfigManager.LoadConfig() in /backend/Config/ConfigManager.cs:line 18
   at NzbWebDAV.Config.ConfigManager.LoadConfig() in /backend/Config/ConfigManager.cs:line 26
   at NzbWebDAV.Program.Main(String[] args) in /backend/Program.cs:line 130
   at NzbWebDAV.Program.Main(String[] args) in /backend/Program.cs:line 226
   at NzbWebDAV.Program.<Main>(String[] args)
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Checking backend health: http://localhost:8080/health ...
Backend failed health check after 300 retries. Exiting.
sh: can't kill pid 28: No such process
